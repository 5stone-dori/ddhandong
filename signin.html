<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 - 욉거러를 위한 든든한동</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="login_styles.css">

    <script>
        // 회원가입 폼 제출 시 유효성 검사 및 서버로 데이터 전송
        function handleSubmit(event) {
            event.preventDefault(); // 기본 폼 제출 동작을 막기

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const email = document.getElementById('email').value;
            const nickname = document.getElementById('nickname').value;
            const termsChecked = document.getElementById('terms').checked;

            // 비밀번호 확인 유효성 검사
            if (password !== confirmPassword) {
                alert('비밀번호와 비밀번호 확인이 일치하지 않습니다.');
                return;
            }

            // 약관 동의 여부 확인
            if (!termsChecked) {
                alert('이용 약관에 동의해야 회원가입할 수 있습니다.');
                return;
            }

            // 추가 유효성 검사 (이메일, 아이디 등)
            if (!username || !password || !email || !nickname) {
                alert('모든 필드를 채워주세요.');
                return;
            }

            // 비밀번호 최소 길이 유효성 검사 추가
            if (password.length < 8) {
                alert('비밀번호는 최소 8자 이상이어야 합니다.');
                return;
            }

            // 서버로 데이터를 전송 (예시)
            const userData = {
                username: username,
                password: password,
                email: email,
                nickname: nickname
            };

            // fetch API로 서버에 POST 요청 보내기
            fetch('/signup', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(userData)
})
.then(response => response.json())  // 서버 응답을 JSON으로 변환
.then(data => {
    console.log(data);  // 서버 응답을 콘솔에 출력
    if (data.success) {
        alert('회원가입이 완료되었습니다!');
        window.location.href = 'index.html';  // 초기화면으로 리디렉션
    } else {
        alert('회원가입에 실패했습니다. 다시 시도해주세요.');
    }
})
.catch(error => {
    console.error('서버와의 통신 중 오류 발생:', error);
    alert('서버와 연결할 수 없습니다. 다시 시도해주세요.');
});

        }
    </script>
</head>
<body>
    <header>
        <h1>욉거러를 위한 든든한동</h1>
    </header>
    <div class="login-container">
        <button class="back-button" style="float: right; width: 30%;" onclick="window.location.href='index.html'">뒤로가기</button>
        <h2>회원가입</h2>
        <form onsubmit="handleSubmit(event)">
            <div class="form-group">
                <label for="username">아이디</label>
                <input type="text" id="username" placeholder="아이디 입력" required>
            </div>
            <div class="form-group">
                <label for="password">비밀번호</label>
                <input type="password" id="password" placeholder="최소 8자 이상" required>
            </div>
            <div class="form-group">
                <label for="confirm-password">비밀번호 확인</label>
                <input type="password" id="confirm-password" placeholder="비밀번호 확인" required>
            </div>
            <div class="form-group">
                <label for="email">이메일</label>
                <input type="email" id="email" placeholder="example.email@gmail.com" required>
            </div>
            <div class="form-group">
                <label for="nickname">닉네임</label>
                <input type="text" id="nickname" placeholder="닉네임 입력" required>
            </div>
            <div class="form-group" style="margin-bottom: 20px; display: flex; align-items: center; white-space: nowrap;">
                <input type="checkbox" id="terms" name="terms" style="margin-right: 10px;">
                <label for="terms">이용 약관 및 개인정보 처리방침에 동의합니다.</label>
            </div>
            <button type="submit">제출</button>
        </form>
    </div>
</body>
</html>